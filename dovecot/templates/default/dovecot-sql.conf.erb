# Generated by Chef, do not hand-edit
<%- db = node[:dovecot][:db] -%>
<%- columns = db[:columns] -%>

driver = <%= db[:driver] %>
<%- case db[:driver] -%>
<%- when 'sqlite' -%>
connect = <%= db[:path] %>
<%- when 'mysql', 'pgsql' -%>
connect = host=<%= db[:host] %> \
          dbname=<%= db[:database] %> \
          user=<%= db[:username] %> \
          password=<%= db[:password] %>
<%- end -%>

default_pass_scheme = SHA512-CRYPT

password_query = SELECT <%= columns[:user] %>       AS user, \
                        <%= columns[:password] %>   AS password, \
                        <%= columns[:uid] %>        AS userdb_uid, \
                        <%= columns[:gid] %>        AS userdb_gid, \
                        <%= columns[:home_dir] %>    AS userdb_home, \
                        <%= columns[:mail_dir] %>    AS userdb_mail \
                 FROM users WHERE <%= columns[:user] %> = '%u'

user_query = SELECT <%= columns[:uid] %>      AS uid, \
                    <%= columns[:gid] %>      AS gid, \
                    <%= columns[:home_dir] %> AS home, \
                    <%= columns[:mail_dir] %> AS mail \
             FROM users WHERE <%= columns[:user] %> = '%u'

iterate_query = SELECT <%= columns[:user] %> AS user FROM users
